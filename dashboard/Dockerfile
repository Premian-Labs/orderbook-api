FROM node:18-slim

COPY . ./

ARG PORT
ENV PORT $PORT

ARG NODE_ENV
ENV NODE_ENV $NODE_ENV

ARG REACT_APP_WALLET_ADDRESS
ENV REACT_APP_WALLET_ADDRESS $REACT_APP_WALLET_ADDRESS

ARG REACT_APP_MAINNET_ORDERBOOK_API_KEY
ENV REACT_APP_MAINNET_ORDERBOOK_API_KEY $REACT_APP_MAINNET_ORDERBOOK_API_KEY

ARG REACT_APP_PREMIA_API_URL
ENV REACT_APP_PREMIA_API_URL $REACT_APP_PREMIA_API_URL

ARG REACT_APP_PREMIA_WS_URL
ENV REACT_APP_PREMIA_WS_URL $REACT_APP_PREMIA_WS_URL


RUN yarn install --production && yarn cache clean

RUN yarn build
CMD ["yarn", "serve", "-l", "3010" ,"-s", "build"]